; Inno Setup compiler script.
; THIS FILE IS AUTOMATICALLY GENERATED BY MYPAINT'S windows/build.sh
; Output is a setup.exe for MyPaint in the parent folder.

[Setup]
AppName=MyPaint w@BITS@
AppVersion=@VERSION@
AppPublisher=Martin Renold and the MyPaint Development Team
AppPublisherURL=http://mypaint.org/
AppComments=MyPaint is a simple drawing and painting program that works well with Wacom-style graphics tablets.
DefaultDirName={pf@BITS@}\MyPaint
DefaultGroupName=MyPaint w@BITS@
SetupIconFile=mypaint.ico
WizardImageFile=wizardimage.bmp
OutputDir=..
OutputBaseFilename=@OUTPUTBASENAME@
AppSupportURL=https://github.com/mypaint/mypaint/issues
AppReadmeFile=https://github.com/mypaint/mypaint/blob/master/README.md
AppUpdatesURL=https://github.com/mypaint/mypaint/releases
ChangesAssociations=yes

[Tasks]
Name: associateora; Description: "&Associate OpenRaster (*.ora) files with MyPaint w@BITS@"
Name: associateora\defopen; Description: "Make MyPaint w@BITS@ their default ""Open"" action"
Name: desktopicon; Description: "Create a &desktop icon"
Name: desktopicon\common; Description: "For all users"; Flags: exclusive
Name: desktopicon\user; Description: "For the current user only"; Flags: exclusive unchecked
Name: translations; Description: "Install &translations"

[Registry]
Root: HKCR; Subkey: ".ora"; ValueType: string; ValueName: ""; ValueData: "OpenRasterFile"; Flags: uninsdeletevalue; Tasks: associateora
Root: HKCR; Subkey: ".ora"; ValueType: string; ValueName: "PerceivedType"; ValueData: "image"; Flags: uninsdeletevalue; Tasks: associateora
Root: HKCR; Subkey: ".ora"; ValueType: string; ValueName: "Content Type"; ValueData: "image/openraster"; Flags: uninsdeletevalue; Tasks: associateora
Root: HKCR; Subkey: "OpenRasterFile"; ValueType: string; ValueName: ""; ValueData: "OpenRaster File"; Flags: uninsdeletekey; Tasks: associateora
Root: HKCR; Subkey: "OpenRasterFile\DefaultIcon"; ValueType: string; ValueName: ""; ValueData: "{app}\share\mypaint\mypaint.ico"; Tasks: associateora
Root: HKCR; Subkey: "OpenRasterFile\shell\open\command"; ValueType: string; ValueName: ""; ValueData: """{app}\bin\python2w.exe"" ""{app}\bin\mypaint"" ""%1"""; Tasks: associateora\defopen
Root: HKCR; Subkey: "OpenRasterFile\shell\EditWithMyPaintW@BITS@"; ValueType: string; ValueName: ""; ValueData: "Edit with MyPaint w&@BITS@"; Tasks: associateora
Root: HKCR; Subkey: "OpenRasterFile\shell\EditWithMyPaintW@BITS@\command"; ValueType: string; ValueName: ""; ValueData: """{app}\bin\python2w.exe"" ""{app}\bin\mypaint"" ""%1"""; Tasks: associateora

[Files]
Source: "mingw@BITS@\*"; DestDir: "{app}"; Excludes: "\share\locale\*"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "mingw@BITS@\share\locale\*"; DestDir: "{app}\share\locale"; Flags: ignoreversion recursesubdirs createallsubdirs; Tasks: translations

[Icons]
Name: "{group}\MyPaint w@BITS@"; Filename: "{app}\bin\python2w.exe"; Parameters: "bin\mypaint"; WorkingDir: "{app}"; Comment: "Simple drawing and painting program"; IconFilename: "{app}\share\mypaint\mypaint.ico"
Name: "{group}\Development\MyPaint w@BITS@ (console debug)"; Filename: "{app}\bin\mypaint-debug.bat"; WorkingDir: "{app}"; Comment: "Run MyPaint in debug mode and show its console output"; IconFilename: "{app}\share\mypaint\mypaint.ico"
Name: "{group}\Development\MyPaint Github Project"; Filename: "https://github.com/mypaint"
Name: "{group}\Development\MyPaint Issue Tracker"; Filename: "https://github.com/mypaint/mypaint/issues"
Name: "{group}\Development\Help Translate MyPaint"; Filename: "https://hosted.weblate.org/projects/mypaint/"
Name: "{group}\MyPaint Website and Blog"; Filename: "http://mypaint.org"
Name: "{group}\MyPaint User Manual"; Filename: "https://github.com/mypaint/mypaint/wiki/v1.2-User-Manual"
Name: "{group}\Get Updates for MyPaint"; Filename: "https://github.com/mypaint/mypaint/releases"
Name: "{group}\Follow MyPaint on Twitter"; Filename: "http://twitter.com/MyPaintApp"
Name: "{commondesktop}\MyPaint w@BITS@"; Filename: "{app}\bin\python2w.exe"; Parameters: "bin\mypaint"; WorkingDir: "{app}"; Comment: "Simple drawing and painting program"; IconFilename: "{app}\share\mypaint\mypaint.ico"; Tasks: desktopicon\common
Name: "{userdesktop}\MyPaint w@BITS@"; Filename: "{app}\bin\python2w.exe"; Parameters: "bin\mypaint"; WorkingDir: "{app}"; Comment: "Simple drawing and painting program"; IconFilename: "{app}\share\mypaint\mypaint.ico"; Tasks: desktopicon\user

[InstallDelete]
Type: filesandordirs; Name: "{app}\share\locale"; Tasks: not translations

[Run]
Filename: "{app}\bin\mypaint-postinst.cmd"; Flags: shellexec runascurrentuser runhidden

[UninstallRun]
Filename: "{app}\bin\mypaint-prerm.cmd"; Flags: shellexec runascurrentuser runhidden
